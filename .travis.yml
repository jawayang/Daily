language: node_js
node_js: stable
cache:
  directories:
  - node_modules
install:
- npm install
before_script:
- npm install -g gulp
script:
- gulp build
after_script:
- cd public
- git init
- git config user.name "James Yang"
- git config user.email "jawa.yang@gmail.com"
- git add .
- git commit -m "Update Daily"
- git push --force --quiet "https://${GH_TOKEN}@${GIT_PAGE_REF}" develop:master
branches:
  only:
  - develop
env:
  global:
  - GIT_PAGE_REF: github.com/jawayang/Daily.git
  - secure: Kn6HQcgxixHXu4q0g/kDcja2eLYkQOVSQmIdv4PmosUn7l6Mjfe2fdjjk7V5s4VKwZ8FaLbwS1c7/mLLQq6edFAsm2fvdInCk+KvDK6Jt3PCi6IW+6s69vBuPH/mrLDew4+/MBSS63LNb9dkY2/WKFWUeFc1zdDGPY5rdl8V1wQ2noMMW1+JW7wj8pR/FrRBo1EdEl0SzMCEFbdhJp8pkXcd09mIgQEc8yZtfjgHx0zwYM+1Q2xsdT3+9JXMxdP/eZLYxm0kNGijQpwrTI9X94KJBcfr48Fo4YbO+MSWIyrVpmftiWKF3plGUXcjnGm/XkjywTmraYoPX09dgr5T6wBSyMHrhs7R1m9nI5oD7ccNcx5znSKAgBmVzHoz9i2LtTI3ahMHUwev96TPJrCKxjnvBChvjko1pcj9/nI9WAPYdcY+d7PL6xLO8RuKK5mIwjs4Fh7S43dLTyx0tJaJDCdafVULGJjnPzyyJVJyvURg8EaISp1SZIu1nrmAs+83QW+UEl36g9xxsdeErWIoGm8BBX5Z4HbLj/6+FOTPrd4JB5fKrL13031/gMvPw5bFCmVIvsM/qT1TU4UcaaFntEkxvdGk0jCwv62v4Mf1/kEUH/aIwCAmHcrFZ0DdunZsVbBQMkZYA+ROzEtaegldkIuwtgB0TnetuNapEDEWtF4=
notifications:
  email:
  - jawa.yang@gmail.com
  on_success: change
  on_failure: always
